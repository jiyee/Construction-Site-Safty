<ion-view title="create">
    <ion-header-bar align-title="center" class="bar-light">
        <button class="button" ng-click="toBack()">返回</button>
        <h1 class="title">考核评价</h1>
    </ion-header-bar>

    <ion-content padding="true">
        <h2>考核评价</h2>

        <label class="item item-input item-select">
            <span class="input-label">
                项目：
            </span>
            <span ng-show="data.project">{{data.project.name}}</span>
            <select ng-model="project" ng-options="item as item.name for item in data.projects" ng-change="changeProject(project)" ng-hide="data.project">
                <option value="" selected>请选择项目</option>
            </select>
        </label>
        <label class="item item-input item-select">
            <span class="input-label">
                施工单位：
            </span>
            <span ng-show="data.unit">{{data.unit.name}}</span>
            <select ng-model="unit" ng-options="item as item.name for item in data.units" ng-change="changeUnit(unit)" ng-hide="data.unit">
                <option value="" selected>请选择单位</option>
            </select>
        </label>
        <label class="item item-input item-select">
            <span class="input-label">
                合同段：
            </span>
            <span ng-show="data.section">{{data.section.name}}</span>
            <select ng-model="section" ng-options="item as item.name for item in data.sections" ng-change="changeSection(section)" ng-hide="data.section">
                <option value="" selected>请选择合同段</option>
            </select>
        </label>
        <label class="item item-input item-select" ng-click="openModal($event)">
            <span class="input-label">
                工程进展：
            </span>
            <span>{{ data.resolveWbs | checked }}</span>
        </label>

        <script id="wbs-modal.html" type="text/ng-template">
            <ion-modal-view>
                <ion-header-bar>
                    <button class="button icon ion-arrow-left-a" ng-click="closeModal()"></button>
                    <h1 class="title">分部、分项工程</h1>
                </ion-header-bar>
                <ion-content>
                    <div class="list">
                        <ion-checkbox ng-repeat="item in data.resolveWbs" ng-model="item.checked" ng-checked="item.checked">
                            {{ item.name }}
                        </ion-checkbox>
                    </div>
                </ion-content>
            </ion-modal-view>
        </script>

        <button class="button button-block button-positive" ng-click="toCreate()">
            开始考核
        </button>

    </ion-content>
</ion-view>
