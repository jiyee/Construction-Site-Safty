<ion-view title="review">
    <ion-header-bar align-title="center" class="bar-calm">
        <button class="button" ng-click="saveAndReturn(data)">返回</button>
        <h1 class="title">{{data.review.name}}</h1>
    </ion-header-bar>

    <ion-content padding="true">
        <div class="card" ng-repeat="item in data.review.items" ng-class="{'FAIL': 'status-fail', 'PASS': 'status-pass', 'UNCHECK': 'status-uncheck'}[item.status]">
            <div class="list last-review" ng-if="item.archives">
                <div class="item item-divider"><i class="icon ion-clipboard"></i>本周期内历次安全检查</div>
                <div class="item" ng-repeat="item in item.archives">{{$index + 1}}. {{item.comment}}</div>
            </div>
            <div class="item item-text-wrap">
                {{item.index}}. {{item.name}}
            </div>

            <div class="item item-text-wrap row" style="padding: 0px 12px;">
                <label for="{{score}}" ng-repeat="score in item.range" style="width: 120px; padding: 5px; font-size: 16px; line-height: 2em;">
                    <input type="radio" name="group-{{item.index}}" value="{{score}}" style="width: 16px; height: 16px;" ng-model="item.score" ng-click="changeScore(item, score)"> {{-score}}分
                </label>
            </div>

            <div ng-show="item.status != 'UNCHECK' && item.score > 0">
                <div class="item item-input-inset row">
                    <label class="item-input col col-75" style="padding: 2px 0 0px 15px">
                        <input type="text" ng-model="item.comments" placeholder="填写备注">
                    </label>
                    <button class="button button-small button-positive col col-25" ng-click="takePhoto(item)">拍照存档</button>
                </div>
                <div style="padding: 6px;">
                    <img ng-src="{{image.uri}}" ng-repeat="image in item.images" width="64" height="64" style="margin-right: 12px;">
                </div>
            </div>
        </div>
    </ion-content>
</ion-view>